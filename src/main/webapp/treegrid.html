<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Test Treegrid</title>
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/bootstrap-table.css">
	<link rel="stylesheet" href="css/jquery.treegrid.min.css">
	<script src="js/jquery-2.0.3.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/bootstrap-table.js"></script>
	<script src="js/bootstrap-table-treegrid.js"></script>
	<script src="js/jquery.treegrid.min.js"></script>
</head>
<body>
	<table id="table"></table>
</body>

<script type="text/javascript">
	var $table = $('#table');
	// var data = [
	// {
	// 	"id": 1,
	// 	"pid": 0,
	// 	"itemName": "系统管理",
	// 	"permissionValue": "open:system:get"
	// },
	// {
	// 	"id": 2,
	// 	"pid": 0,
	// 	"itemName": "字典管理",
	// 	"permissionValue": "open:dict:get"
	// },
	// {
	// 	"id": 20,
	// 	"pid": 1,
	// 	"itemName": "新增系统",
	// 	"permissionValue": "open:system:add"
	// },
	// {
	// 	"id": 21,
	// 	"pid": 1,
	// 	"itemName": "编辑系统",
	// 	"permissionValue": "open:system:edit"
	// },
	// {
	// 	"id": 22,
	// 	"pid": 1,
	// 	"itemName": "删除系统",
	// 	"permissionValue": "open:system:delete"
	// },
	// {
	// 	"id": 33,
	// 	"pid": 2,
	// 	"itemName": "系统环境",
	// 	"permissionValue": "open:env:get"
	// },
	// {
	// 	"id": 333,
	// 	"pid": 33,
	// 	"itemName": "新增环境",
	// 	"permissionValue": "open:env:add"
	// },
	// {
	// 	"id": 3333,
	// 	"pid": 33,
	// 	"itemName": "编辑环境",
	// 	"permissionValue": "open:env:edit"
	// },
	// {
	// 	"id": 233332,
	// 	"pid": 33,
	// 	"itemName": "删除环境",
	// 	"permissionValue": "open:env:delete"
	// }
	// ];
	$(function() {
		$table.bootstrapTable({
            url: './treegrid.json',
            // data:data,
            height: $(window).height(),
            striped: true,
            sidePagination: 'server',
            idField: 'id',
            columns: [
            {
            	field: 'ck',
            	checkbox: true
            },
            {
            	field: 'itemName',
            	title: '名称',
            },
            {
            	field: 'permissionValue',
            	title: '权限值',
            	sortable: true,
            	align: 'center',
            },
            {
            	field:'button',
            	title:'操作',
            	events:'operateEvents',
            	formatter:'Editor'

            }
            ],
            onClickRow: function (row, $element) {
            	curRow = row;
            },

            // bootstrap-table-tree-column.js 插件配置
		    // treeShowField: 'itemName',
		    // parentIdField: 'pid'
		    // bootstrap-table-tree-column.js 插件配置

		    // bootstrap-table-treegrid.js 插件配置
		    treeShowField: 'itemName',
		    parentIdField: 'pid',
		    onLoadSuccess: function(data) {
		    	console.log('load');
		    	$table.treegrid({
		    		treeColumn: 1,
		    		onChange: function() {
		    			$table.bootstrapTable('resetWidth');
		    		}
		    	});
		    }
		});
	});  
    //操作列
    function Editor(value,row,index) {
    	return[
    	'<button id="TableEditor"  type="button" class="btn btn-default">编辑</button>&nbsp;&nbsp;',
    	'<button id="TableDelete"  type="button" class="btn btn-default">删除</button>'
    	].join("")
    }
    window.operateEvents={
    	"click #TableEditor":function (e,value,row,index){ 
    	},
    	"click #TableDelete":function (e,value,row,index){
    		$(this).parent().parent().remove();
    	}
    }

</script>
</html>